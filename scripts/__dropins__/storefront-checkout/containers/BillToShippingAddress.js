import*as e from"@dropins/tools/event-bus.js";import*as t from"@dropins/tools/fetch-graphql.js";export const id=4272;export const ids=[4272];export const modules={6900:(e,t,r)=>{r.d(t,{m:()=>d});var n=r(3584),i=e=>e?e.filter(Boolean).filter((e=>(null==e?void 0:e.label)&&(null==e?void 0:e.value))).map((e=>({text:e.label,value:e.value}))):[],o=e=>e?e.filter(Boolean).filter((e=>(null==e?void 0:e.name)&&(null==e?void 0:e.value))):[],a=r(764),l=r(1092);function s(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,i)}var d=function(){var e,t=(e=function*(){return(0,n.CA)('\n  query fetchAddressFormFields {\n    attributesForm(formCode: "customer_register_address") {\n      items {\n        frontend_input\n        code\n        label\n        default_value\n        is_required\n        options {\n          label\n          value\n          is_default\n        }\n        ... on CustomerAttributeMetadata {\n          multiline_count\n          sort_order\n          validate_rules {\n            name\n            value\n          }\n        }\n      }\n      errors {\n        message\n        type\n      }\n    }\n  }\n',{method:"GET",cache:"no-cache"}).then((e=>{var{data:t,errors:r}=e;return(0,a.Y)(r),(e=>e?e.filter(Boolean).map((e=>({code:e.code,defaultValue:e.default_value||void 0,frontendInput:e.frontend_input||void 0,isDisabled:!1,isRequired:e.is_required,label:e.label||void 0,multilineCount:e.multiline_count||void 0,options:i(e.options),sortOrder:e.sort_order||void 0,validateRules:o(e.validate_rules)}))):[])(t.attributesForm.items)})).catch(l.i)},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}()},2532:(e,t,r)=>{r.d(t,{W:()=>d});var n=r(3760),i=r(3112),o="\n  mutation setBillingAddress(\n    $cartId: String!\n    $input: BillingAddressInput!\n  ) {\n    setBillingAddressOnCart(\n      input: { cart_id: $cartId, billing_address: $input }\n    ) {\n      cart {\n        id\n        ...CheckoutData\n        ...CartSummaryItems\n      }\n    }\n  }\n  ".concat(i.e2,"\n  ").concat(i.Qz,"\n"),a=r(9120),l=r(6824);function s(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,i)}var d=function(){var e,t=(e=function*(e){var{signal:t,cartId:r,input:i}=e,{address:s,same_as_shipping:d}=i;if(!r)throw new n.Ij;if(!d&&!s)throw new n.o8;return yield(0,a.m)({type:"mutation",query:o,options:{signal:t,variables:{cartId:r,input:i}},path:"setBillingAddressOnCart.cart",signalType:"cart",transformer:l.o})},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()},8572:(e,t,r)=>{r.d(t,{_:()=>z,i:()=>$});var n=r(2532),i=r(4944),o=r(3792),a=r(3388),l=r(8412),s=()=>(0,l.im)(a.W,{className:"bill-to-shipping-address__skeleton",children:(0,l.im)(a.K,{variant:"row",size:"small"})}),d=r(5536),c=r.n(d),u=r(7008),p=r.n(u),f=r(1496),v=r.n(f),m=r(9356),b=r.n(m),h=r(9904),g=r.n(h),y=r(9960),O={attributes:{"data-dropin":"storefront-checkout","data-sdk":"0.23.0-alpha1067"},styleTagTransform:function(e,t){window._loadedStyles=window._loadedStyles??{};const r=e?.match(/^\.dropin-(\w+)/)?.[1],n=t.getAttribute("data-sdk"),i=r?`sdk/${r}`:t.getAttribute("data-dropin");t.setAttribute("data-dropin",i),t.removeAttribute("data-sdk");const o=window._loadedStyles[i];if(o){const i=function(e,t){const[r,n]=e.split("-"),[i,o]=t.split("-"),a=[...r.split("."),n],l=[...i.split("."),o],s=parseInt(a[0],10),d=parseInt(l[0],10);if(s!==d)return s>d?e:t;const c=parseInt(a[1],10),u=parseInt(l[1],10);if(c!==u)return c>u?e:t;const p=parseInt(a[2],10),f=parseInt(l[2],10);if(p!==f)return p>f?e:t;if(a[3]&&l[3]){const r=/(alpha|beta)(.*)/,n=a[3].match(r),i=l[3].match(r),o=n[1],s=i[1],d=parseInt(n[2],10),c=parseInt(i[2],10);if(o===s)return d>c?e:t;if("alpha"===o&&"beta"===s)return t;if("beta"===o&&"alpha"===s)return e}return a[3]?t:e}(n,o.sdk);if(!r||r&&i===o.sdk){const t=o.style.textContent;o.style.textContent=`${t}\n/* --- MERGED --- */\n${e}`}else r&&i!==o.sdk&&(o.style.textContent=`/* --- UPGRADED --- */\n${e}`);return void t.remove()}t.textContent=e,window._loadedStyles[i]={sdk:n,core:r,style:t};const a=document.querySelector("head"),{lastDropinStyleInjected:l,lastSDKStyleInjected:s}=window._loadedStyles;r?(s?a.insertBefore(t,s.nextSibling):a.insertBefore(t,a.firstChild),window._loadedStyles.lastSDKStyleInjected=t):(l?a.insertBefore(t,l.nextSibling):s?a.insertBefore(t,s.nextSibling):a.insertBefore(t,a.firstChild),window._loadedStyles.lastDropinStyleInjected=t)}};O.setAttributes=b(),O.insert=v().bind(null,"head"),O.domAPI=p(),O.insertStyleElement=g();c()(y.c,O);y.c&&y.c.locals&&y.c.locals;var S=r(2460),j=["className","isInitialized","checked"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var P=e=>{var{className:t,isInitialized:r=!0,checked:n=!0}=e,a=I(e,j),d=(0,S.cF)({title:"Checkout.BillToShippingAddress.title"});return r?(0,l.im)("div",{className:(0,i.i)(["checkout-bill-to-shipping-address",t]),children:(0,l.im)(o.y,_({"data-testid":"bill-to-shipping-checkbox",className:"checkout-bill-to-shipping-address__checkbox",checked:n,name:"checkout-bill-to-shipping-address__checkbox",label:d.title},a))}):(0,l.im)(s,{})},B=r(5668),A=r(9488),C=r(2796),x=r(40),T=r(2236),D=["children"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function $(e,t,r){return!t&&!r||!(!t||!r)&&e.every((e=>{var n=e.code;return function(e,t,r){var n=e[r],i=t[r];return void 0===n&&void 0===i||null===n&&null===i||("object"==typeof n&&"object"==typeof i?JSON.stringify(n)===JSON.stringify(i):n===i)}(t,r,n)}))}var z=e=>{var{children:t}=e,r=q(e,D),{data:i}=B.cartSignal.value,o=(null==i?void 0:i.id)||"",a=A.isBillToShippingSignal.value.checked,{isInitialized:s}=(e=>{var t,{isBillToShipping:r}=e,[n,i]=(0,C.oT)(!1),{fields:o}=(0,T.q)(),a=B.cartSignal.value.data,l=!!a,s=null==a?void 0:a.billingAddress,d=null==a||null===(t=a.shippingAddresses)||void 0===t?void 0:t[0];return(0,C.YB)((()=>{if(o){var e=localStorage.getItem(x.c);if(!n&&e)return i(!0),void(r.value={checked:"true"===e,setByUser:!1});if(!n&&l){i(!0);var t=$(o,s,d);r.value={checked:null!=a&&a.billingAddress?t:r.value.checked,setByUser:!1}}}}),[s,null==a?void 0:a.billingAddress,o,l,r,n,d]),{isInitialized:n}})({isBillToShipping:A.isBillToShippingSignal});return(0,l.im)(P,F(F({},r),{},{checked:a,isInitialized:s,onChange:e=>{var t,r=e.target.checked,i=B.cartSignal.value.data,a=Boolean(null==i||null===(t=i.shippingAddresses)||void 0===t?void 0:t[0]);if(A.isBillToShippingSignal.value={checked:r,setByUser:!0},localStorage.setItem(x.c,r.toString()),s&&r&&a){var l=new AbortController;return(0,n.W)({signal:l.signal,cartId:o,input:{same_as_shipping:!0}}).catch((e=>{console.error(e)})),()=>{l.abort()}}},disabled:B.cartSignal.value.pending}))}},40:(e,t,r)=>{r.d(t,{c:()=>n});var n="is_bill_to_shipping_address"},9700:(e,t,r)=>{r.d(t,{_k:()=>i._,cT:()=>n.c,cp:()=>i._,iI:()=>i.i});var n=r(40),i=r(8572)},2236:(e,t,r)=>{r.d(t,{Y:()=>s,q:()=>d});var n=r(6900),i=r(304),o=r(8596),a=r(8412),l=(0,i.GY)(void 0);function s(e){var{children:t}=e,[r,i]=(0,o.oT)({});return(0,o.YB)((()=>{(0,n.m)().then((e=>i({fields:e})))}),[]),(0,a.im)(l.Provider,{value:r,children:t})}function d(){var e=(0,o.Co)(l);if(void 0!==e)return e;throw new Error("useAddressFormFields must be used within an AddressFormFieldsProvider")}},764:(e,t,r)=>{r.d(t,{Y:()=>n});var n=e=>{if(e&&0!==e.length)throw Error(e.map((e=>e.message)).join(" "))}},9488:(e,t,r)=>{r.d(t,{isBillToShippingSignal:()=>n});var n=(0,r(1520).OC)({checked:!0,setByUser:!1})},9960:(e,t,r)=>{r.d(t,{c:()=>l});var n=r(6008),i=r.n(n),o=r(2076),a=r.n(o)()(i());a.push([e.id,".checkout-bill-to-shipping-address{\n  display:grid;\n}\n\n.checkout-bill-to-shipping-address label{\n  font:var(--type-body-2-default-font);\n  letter-spacing:var(--type-body-2-default-letter-spacing);\n  gap:0;\n}\n",""]);const l=a},8122:(t,r,n)=>{t.exports=(e=>{var t={};return n.d(t,e),t})({events:()=>e.events})},8616:(e,r,n)=>{e.exports=(e=>{var t={};return n.d(t,e),t})({FetchGraphQL:()=>t.FetchGraphQL})}};import r from"../runtime.js";import*as n from"../8412.js";r.C(n);import*as i from"../2892.js";r.C(i);import*as o from"../2328.js";r.C(o);import*as a from"../8668.js";r.C(a);import*as l from"../5068.js";r.C(l);import*as s from"./BillToShippingAddress.js";r.C(s);var d,c=(d=9700,r(r.s=d)),u=c.cT,p=c._k,f=c.iI,v=c.cp;export{u as BILL_TO_SHIPPING_KEY,p as BillToShippingAddress,f as compareAddresses,v as default};